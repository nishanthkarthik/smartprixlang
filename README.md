# smartprixlang
Smartprix lang (`sml`) to C transpiler / LLVM IR compiler

# Language
    echo a
    set a b
    add a b c
    sub a b c
    mul a b c
    div a b c
    goto l
    label l
    if a .rel. b
    endif
    exit

# Sample

This is a sample fibonacci program in `sml`

    set a 0
    set b 1
    set c 0
    set n 1
    echo a
    echo b
    label loopstart
    if n < 20
    add c a b
    echo c
    set a b
    set b c
    add n n 1
    goto loopstart
    endif

This is the *LLVM IR* generated by `cat examples/fibonacci.sml | ./scc llvm -`


    target triple = "x86_64-unknown-linux-gnu"
    declare i32 @printf(i8*, ...)
    @decstr = private unnamed_addr constant [4 x i8] c"%d\0A\00"
    
    define i32 @main() {

    %n = alloca i32
    %c = alloca i32
    %a = alloca i32
    %b = alloca i32

    store i32 0, i32* %a
    store i32 1, i32* %b
    store i32 0, i32* %c
    store i32 1, i32* %n
    %t1 = load i32, i32* %a
    call i32 (i8*, ...) @printf(i8* getelementptr inbounds ([4 x i8], [4 x i8]* @decstr, i32 0, i32 0), i32 %t1)
    %t2 = load i32, i32* %b
    call i32 (i8*, ...) @printf(i8* getelementptr inbounds ([4 x i8], [4 x i8]* @decstr, i32 0, i32 0), i32 %t2)
    br label %loopstart
    loopstart:
    %t3 = load i32, i32* %n
    %t4 = icmp slt i32 %t3, 20
    br i1 %t4, label %beg1, label %end1
    beg1:
    %t5 = load i32, i32* %a
    %t6 = load i32, i32* %b
    %t7 = add i32 %t5, %t6
    store i32 %t7, i32* %c
    %t8 = load i32, i32* %c
    call i32 (i8*, ...) @printf(i8* getelementptr inbounds ([4 x i8], [4 x i8]* @decstr, i32 0, i32 0), i32 %t8)
    %t9 = load i32, i32* %b
    store i32 %t9, i32* %a
    %t10 = load i32, i32* %c
    store i32 %t10, i32* %b
    %t11 = load i32, i32* %n
    %t12 = add i32 %t11, 1
    store i32 %t12, i32* %n
    br label %loopstart
    br label %ret1
    end1:
    br label %ret1
    ret1:
    ret i32 0
    }

